{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-a1d1afb0\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"user-management\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"用户管理\", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  class: \"search\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"编辑\");\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"删除\");\nconst _hoisted_6 = {\n  class: \"pagination\"\n};\nconst _hoisted_7 = {\n  class: \"back\"\n};\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\"返回上一页\");\nconst _hoisted_9 = {\n  slot: \"footer\",\n  class: \"dialog-footer\"\n};\nconst _hoisted_10 = /*#__PURE__*/_createTextVNode(\"取 消\");\nconst _hoisted_11 = /*#__PURE__*/_createTextVNode(\"确 定\");\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_input, {\n    modelValue: $data.searchQuery,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.searchQuery = $event),\n    placeholder: \"搜索用户\",\n    onInput: $options.searchUsers\n  }, null, 8 /* PROPS */, [\"modelValue\", \"onInput\"])]), _createVNode(_component_el_table, {\n    data: $data.tableData,\n    style: {\n      \"width\": \"100%\"\n    }\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      prop: \"id\",\n      label: \"ID\",\n      width: \"180\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"username\",\n      label: \"用户名\",\n      width: \"180\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"email\",\n      label: \"邮箱\",\n      width: \"180\"\n    }), _createVNode(_component_el_table_column, {\n      label: \"操作\"\n    }, {\n      default: _withCtx(({\n        row\n      }) => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: $event => $options.handleEdit(row)\n      }, {\n        default: _withCtx(() => [_hoisted_4]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), _createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: $event => $options.handleDelete(row)\n      }, {\n        default: _withCtx(() => [_hoisted_5]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\"]), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_pagination, {\n    onSizeChange: $options.handleSizeChange,\n    onCurrentChange: $options.handleCurrentChange,\n    \"current-page\": $data.currentPage,\n    \"page-sizes\": [5, 10, 20],\n    \"page-size\": $data.pageSize,\n    layout: \"total, sizes, prev, pager, next, jumper\",\n    total: $data.total\n  }, null, 8 /* PROPS */, [\"onSizeChange\", \"onCurrentChange\", \"current-page\", \"page-size\", \"total\"])]), _createElementVNode(\"div\", _hoisted_7, [_createVNode(_component_el_button, {\n    onClick: _cache[1] || (_cache[1] = $event => _ctx.$router.go(-1))\n  }, {\n    default: _withCtx(() => [_hoisted_8]),\n    _: 1 /* STABLE */\n  })]), _createVNode(_component_el_dialog, {\n    title: \"编辑用户\",\n    modelValue: $data.editDialogVisible,\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.editDialogVisible = $event),\n    width: \"30%\",\n    onClose: $options.cancelEdit\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form, {\n      model: $data.editForm,\n      \"label-width\": \"80px\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"用户名\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.editForm.username,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.editForm.username = $event)\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"邮箱\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.editForm.email,\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.editForm.email = $event)\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\"]), _createElementVNode(\"div\", _hoisted_9, [_createVNode(_component_el_button, {\n      onClick: $options.cancelEdit\n    }, {\n      default: _withCtx(() => [_hoisted_10]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $options.submitEdit\n    }, {\n      default: _withCtx(() => [_hoisted_11]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\", \"onClose\"])]);\n}","map":{"version":3,"names":["class","_createElementVNode","slot","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","_component_el_input","$data","searchQuery","$event","placeholder","onInput","$options","searchUsers","_component_el_table","data","tableData","style","_component_el_table_column","prop","label","width","default","_withCtx","row","_component_el_button","type","onClick","handleEdit","handleDelete","_hoisted_6","_component_el_pagination","onSizeChange","handleSizeChange","onCurrentChange","handleCurrentChange","currentPage","pageSize","layout","total","_hoisted_7","_cache","_ctx","$router","go","_component_el_dialog","title","editDialogVisible","onClose","cancelEdit","_component_el_form","model","editForm","_component_el_form_item","username","email","_hoisted_9","submitEdit"],"sources":["D:\\idea\\forum4\\frontend\\src\\views\\UserManagement.vue"],"sourcesContent":["<template>\r\n  <div class=\"user-management\">\r\n    <h1>用户管理</h1>\r\n    <div class=\"search\">\r\n      <el-input\r\n        v-model=\"searchQuery\"\r\n        placeholder=\"搜索用户\"\r\n        @input=\"searchUsers\"\r\n      ></el-input>\r\n    </div>\r\n    <el-table :data=\"tableData\" style=\"width: 100%\">\r\n      <el-table-column prop=\"id\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"username\" label=\"用户名\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"email\" label=\"邮箱\" width=\"180\"></el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template #default=\"{ row }\">\r\n          <el-button type=\"primary\" @click=\"handleEdit(row)\">编辑</el-button>\r\n          <el-button type=\"primary\" @click=\"handleDelete(row)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <div class=\"pagination\">\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page.sync=\"currentPage\"\r\n        :page-sizes=\"[5, 10, 20]\"\r\n        :page-size=\"pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n      >\r\n      </el-pagination>\r\n    </div>\r\n    <div class=\"back\">\r\n      <el-button @click=\"$router.go(-1)\">返回上一页</el-button>\r\n    </div>\r\n\r\n    <el-dialog\r\n      title=\"编辑用户\"\r\n      v-model=\"editDialogVisible\"\r\n      width=\"30%\"\r\n      @close=\"cancelEdit\"\r\n    >\r\n      <el-form :model=\"editForm\" label-width=\"80px\">\r\n        <el-form-item label=\"用户名\">\r\n          <el-input v-model=\"editForm.username\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\">\r\n          <el-input v-model=\"editForm.email\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"cancelEdit\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitEdit\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      editDialogVisible: false,\r\n      editForm: {},\r\n      searchQuery: \"\",\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchData();\r\n  },\r\n  methods: {\r\n    async fetchData() {\r\n      try {\r\n        const response = await this.$http.get(\"/user/list\", {\r\n          params: {\r\n            page: this.currentPage - 1,\r\n            size: this.pageSize,\r\n            search: this.searchQuery,\r\n          },\r\n        });\r\n        this.tableData = response.data.content;\r\n        this.total = response.data.totalElements;\r\n      } catch (error) {\r\n        console.error(error);\r\n        this.$message.error(\"获取用户列表失败\");\r\n      }\r\n    },\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n      this.fetchData();\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.currentPage = val;\r\n      this.fetchData();\r\n    },\r\n    handleEdit(row) {\r\n      console.log('Edit button clicked');\r\nconsole.log(\"Handle edit:\", row);\r\nthis.openEditDialog(row);\r\n},\r\nopenEditDialog(row) {\r\nconsole.log('Opening edit dialog');\r\nthis.editForm = JSON.parse(JSON.stringify(row));\r\nthis.editDialogVisible = true;\r\nconsole.log('editDialogVisible:', this.editDialogVisible); // 新增这一行\r\n},\r\nasync submitEdit() {\r\n// 提交编辑逻辑\r\ntry {\r\nawait this.$http.put(`/user/update/${this.editForm.id}`, this.editForm);\r\nthis.$message.success(\"用户更新成功\");\r\nawait this.fetchData();\r\nthis.editDialogVisible = false;\r\n} catch (error) {\r\nconsole.error(error);\r\nthis.$message.error(\"用户更新失败\");\r\n}\r\n},\r\ncancelEdit() {\r\nthis.editDialogVisible = false;\r\n},\r\nasync handleDelete(row) {\r\n// 删除用户逻辑\r\ntry {\r\nawait this.$http.delete(`/user/delete/${row.id}`);\r\nthis.$message.success(\"用户删除成功\");\r\nawait this.fetchData();\r\n} catch (error) {\r\nconsole.error(error);\r\nthis.$message.error(\"用户删除失败\");\r\n}\r\n},\r\nsearchUsers() {\r\nthis.fetchData();\r\n},\r\n},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.user-management {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.pagination {\r\n  margin-top: 20px;\r\n}\r\n\r\n.back {\r\n  margin-top: 10px;\r\n  text-align: center;\r\n}\r\n\r\n.search {\r\n  margin-bottom: 20px;\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}