{"ast":null,"code":"export default {\n  data() {\n    return {\n      tableData: [],\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      editDialogVisible: false,\n      editForm: {},\n      searchQuery: \"\"\n    };\n  },\n  created() {\n    this.fetchData();\n  },\n  methods: {\n    async fetchData() {\n      try {\n        const response = await this.$http.get(\"/user/list\", {\n          params: {\n            page: this.currentPage - 1,\n            size: this.pageSize,\n            search: this.searchQuery\n          }\n        });\n        this.tableData = response.data.content;\n        this.total = response.data.totalElements;\n      } catch (error) {\n        console.error(error);\n        this.$message.error(\"获取用户列表失败\");\n      }\n    },\n    handleSizeChange(val) {\n      this.pageSize = val;\n      this.fetchData();\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val;\n      this.fetchData();\n    },\n    handleEdit(row) {\n      console.log('Edit button clicked');\n      console.log(\"Handle edit:\", row);\n      this.openEditDialog(row);\n    },\n    openEditDialog(row) {\n      console.log('Opening edit dialog');\n      this.editForm = JSON.parse(JSON.stringify(row));\n      this.editDialogVisible = true;\n      console.log('editDialogVisible:', this.editDialogVisible); // 新增这一行\n    },\n\n    async submitEdit() {\n      // 提交编辑逻辑\n      try {\n        await this.$http.put(`/user/update/${this.editForm.id}`, this.editForm);\n        this.$message.success(\"用户更新成功\");\n        await this.fetchData();\n        this.editDialogVisible = false;\n      } catch (error) {\n        console.error(error);\n        this.$message.error(\"用户更新失败\");\n      }\n    },\n    cancelEdit() {\n      this.editDialogVisible = false;\n    },\n    async handleDelete(row) {\n      // 删除用户逻辑\n      try {\n        await this.$http.delete(`/user/delete/${row.id}`);\n        this.$message.success(\"用户删除成功\");\n        await this.fetchData();\n      } catch (error) {\n        console.error(error);\n        this.$message.error(\"用户删除失败\");\n      }\n    },\n    searchUsers() {\n      this.fetchData();\n    }\n  }\n};","map":{"version":3,"names":["data","tableData","currentPage","pageSize","total","editDialogVisible","editForm","searchQuery","created","fetchData","methods","response","$http","get","params","page","size","search","content","totalElements","error","console","$message","handleSizeChange","val","handleCurrentChange","handleEdit","row","log","openEditDialog","JSON","parse","stringify","submitEdit","put","id","success","cancelEdit","handleDelete","delete","searchUsers"],"sources":["D:\\idea\\forum4\\frontend\\src\\views\\UserManagement.vue"],"sourcesContent":["<template>\r\n  <div class=\"user-management\">\r\n    <h1>用户管理</h1>\r\n    <div class=\"search\">\r\n      <el-input\r\n        v-model=\"searchQuery\"\r\n        placeholder=\"搜索用户\"\r\n        @input=\"searchUsers\"\r\n      ></el-input>\r\n    </div>\r\n    <el-table :data=\"tableData\" style=\"width: 100%\">\r\n      <el-table-column prop=\"id\" label=\"ID\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"username\" label=\"用户名\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"email\" label=\"邮箱\" width=\"180\"></el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template #default=\"{ row }\">\r\n          <el-button type=\"primary\" @click=\"handleEdit(row)\">编辑</el-button>\r\n          <el-button type=\"primary\" @click=\"handleDelete(row)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <div class=\"pagination\">\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page.sync=\"currentPage\"\r\n        :page-sizes=\"[5, 10, 20]\"\r\n        :page-size=\"pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n      >\r\n      </el-pagination>\r\n    </div>\r\n    <div class=\"back\">\r\n      <el-button @click=\"$router.go(-1)\">返回上一页</el-button>\r\n    </div>\r\n\r\n    <el-dialog\r\n      title=\"编辑用户\"\r\n      v-model=\"editDialogVisible\"\r\n      width=\"30%\"\r\n      @close=\"cancelEdit\"\r\n    >\r\n      <el-form :model=\"editForm\" label-width=\"80px\">\r\n        <el-form-item label=\"用户名\">\r\n          <el-input v-model=\"editForm.username\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\">\r\n          <el-input v-model=\"editForm.email\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"cancelEdit\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitEdit\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      editDialogVisible: false,\r\n      editForm: {},\r\n      searchQuery: \"\",\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchData();\r\n  },\r\n  methods: {\r\n    async fetchData() {\r\n      try {\r\n        const response = await this.$http.get(\"/user/list\", {\r\n          params: {\r\n            page: this.currentPage - 1,\r\n            size: this.pageSize,\r\n            search: this.searchQuery,\r\n          },\r\n        });\r\n        this.tableData = response.data.content;\r\n        this.total = response.data.totalElements;\r\n      } catch (error) {\r\n        console.error(error);\r\n        this.$message.error(\"获取用户列表失败\");\r\n      }\r\n    },\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n      this.fetchData();\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.currentPage = val;\r\n      this.fetchData();\r\n    },\r\n    handleEdit(row) {\r\n      console.log('Edit button clicked');\r\nconsole.log(\"Handle edit:\", row);\r\nthis.openEditDialog(row);\r\n},\r\nopenEditDialog(row) {\r\nconsole.log('Opening edit dialog');\r\nthis.editForm = JSON.parse(JSON.stringify(row));\r\nthis.editDialogVisible = true;\r\nconsole.log('editDialogVisible:', this.editDialogVisible); // 新增这一行\r\n},\r\nasync submitEdit() {\r\n// 提交编辑逻辑\r\ntry {\r\nawait this.$http.put(`/user/update/${this.editForm.id}`, this.editForm);\r\nthis.$message.success(\"用户更新成功\");\r\nawait this.fetchData();\r\nthis.editDialogVisible = false;\r\n} catch (error) {\r\nconsole.error(error);\r\nthis.$message.error(\"用户更新失败\");\r\n}\r\n},\r\ncancelEdit() {\r\nthis.editDialogVisible = false;\r\n},\r\nasync handleDelete(row) {\r\n// 删除用户逻辑\r\ntry {\r\nawait this.$http.delete(`/user/delete/${row.id}`);\r\nthis.$message.success(\"用户删除成功\");\r\nawait this.fetchData();\r\n} catch (error) {\r\nconsole.error(error);\r\nthis.$message.error(\"用户删除失败\");\r\n}\r\n},\r\nsearchUsers() {\r\nthis.fetchData();\r\n},\r\n},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.user-management {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.pagination {\r\n  margin-top: 20px;\r\n}\r\n\r\n.back {\r\n  margin-top: 10px;\r\n  text-align: center;\r\n}\r\n\r\n.search {\r\n  margin-bottom: 20px;\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}