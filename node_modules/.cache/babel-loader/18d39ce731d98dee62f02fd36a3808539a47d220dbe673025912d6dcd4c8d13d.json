{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { useRouter } from 'vue-router';\nexport default {\n  setup() {\n    const router = useRouter();\n    return {\n      router\n    };\n  },\n  data() {\n    return {\n      loginForm: {\n        username: \"\",\n        password: \"\"\n      }\n    };\n  },\n  methods: {\n    submitForm() {\n      this.$http.post(\"/api/login\", this.loginForm).then(response => {\n        if (response.status === 200) {\n          // 存储 token 和角色信息到 localStorage\n          localStorage.setItem(\"token\", response.data.token);\n\n          // 根据角色重定向到相应的页面\n\n          this.router.push(\"/\");\n        }\n      }).catch(error => {\n        if (error.response.status === 400) {\n          this.$message.error(error.response.data.error);\n        }\n      });\n    },\n    goToRegister() {\n      this.router.push(\"/register\");\n    }\n  }\n};","map":{"version":3,"names":["useRouter","setup","router","data","loginForm","username","password","methods","submitForm","$http","post","then","response","status","localStorage","setItem","token","push","catch","error","$message","goToRegister"],"sources":["D:\\idea\\forum4\\frontend\\src\\views\\Login.vue"],"sourcesContent":["<template>\r\n  <div class=\"login\">\r\n    <h1>Login</h1>\r\n    <el-form :model=\"loginForm\" @submit.native.prevent=\"submitForm('loginForm')\">\r\n      <el-form-item label=\"Username\" prop=\"username\">\r\n        <el-input v-model=\"loginForm.username\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"Password\" prop=\"password\">\r\n        <el-input v-model=\"loginForm.password\" type=\"password\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"submitForm\">Login</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <p>\r\n      Don't have an account? <a @click=\"goToRegister\">Register</a>\r\n    </p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useRouter } from 'vue-router';\r\n\r\nexport default {\r\n  setup() {\r\n    const router = useRouter();\r\n\r\n    return {\r\n      router,\r\n    };\r\n  },\r\n  data() {\r\n    return {\r\n      loginForm: {\r\n        username: \"\",\r\n        password: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    submitForm() {\r\n      this.$http\r\n        .post(\"/api/login\", this.loginForm)\r\n        .then((response) => {\r\n          if (response.status === 200) {\r\n            // 存储 token 和角色信息到 localStorage\r\n            localStorage.setItem(\"token\", response.data.token);\r\n\r\n\r\n            // 根据角色重定向到相应的页面\r\n\r\n              this.router.push(\"/\");\r\n\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          if (error.response.status === 400) {\r\n            this.$message.error(error.response.data.error);\r\n          }\r\n        });\r\n    },\r\n    goToRegister() {\r\n      this.router.push(\"/register\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.login {\r\n  width: 300px;\r\n  margin: 100px auto;\r\n}\r\n</style>\r\n"],"mappings":";AAqBA,SAASA,SAAQ,QAAS,YAAY;AAEtC,eAAe;EACbC,KAAKA,CAAA,EAAG;IACN,MAAMC,MAAK,GAAIF,SAAS,EAAE;IAE1B,OAAO;MACLE;IACF,CAAC;EACH,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE;QACTC,QAAQ,EAAE,EAAE;QACZC,QAAQ,EAAE;MACZ;IACF,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,UAAUA,CAAA,EAAG;MACX,IAAI,CAACC,KAAI,CACNC,IAAI,CAAC,YAAY,EAAE,IAAI,CAACN,SAAS,EACjCO,IAAI,CAAEC,QAAQ,IAAK;QAClB,IAAIA,QAAQ,CAACC,MAAK,KAAM,GAAG,EAAE;UAC3B;UACAC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,QAAQ,CAACT,IAAI,CAACa,KAAK,CAAC;;UAGlD;;UAEE,IAAI,CAACd,MAAM,CAACe,IAAI,CAAC,GAAG,CAAC;QAEzB;MACF,CAAC,EACAC,KAAK,CAAEC,KAAK,IAAK;QAChB,IAAIA,KAAK,CAACP,QAAQ,CAACC,MAAK,KAAM,GAAG,EAAE;UACjC,IAAI,CAACO,QAAQ,CAACD,KAAK,CAACA,KAAK,CAACP,QAAQ,CAACT,IAAI,CAACgB,KAAK,CAAC;QAChD;MACF,CAAC,CAAC;IACN,CAAC;IACDE,YAAYA,CAAA,EAAG;MACb,IAAI,CAACnB,MAAM,CAACe,IAAI,CAAC,WAAW,CAAC;IAC/B;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}